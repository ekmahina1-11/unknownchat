<!DOCTYPE html><html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>UnknownChat</title>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<style>
body,html{margin:0;padding:0;height:100%;font-family:Arial;background:#e5ddd5}
#loaderBar{height:3px;width:0%;background:#25d366;transition:width .3s}
#login,#chat{max-width:420px;margin:auto;height:100%}
#login{display:flex;flex-direction:column;justify-content:center;padding:20px}
input,button{padding:12px;margin:6px 0;font-size:16px}
button{background:#128c7e;color:#fff;border:none}
#chat{display:none;flex-direction:column}
#header{background:#075e54;color:#fff;padding:10px;display:flex;justify-content:space-between}
#headerName{font-weight:bold}
#headerStatus{font-size:12px}
#messages{flex:1;overflow-y:auto;padding:10px}
.msg{max-width:70%;padding:8px;border-radius:8px;margin:6px 0}
.right{margin-left:auto;background:#dcf8c6}
.left{margin-right:auto;background:#fff}
#sendBox{display:flex;background:#fff;padding:5px}
#sendBox input{flex:1}
</style>
</head>
<body>
<div id="loaderBar"></div>
<div id="login">
<h2>UnknownChat</h2>
<input id="username" placeholder="Username">
<input id="password" type="password" placeholder="Password">
<button onclick="login()">Login</button>
<p id="error"></p>
</div>
<div id="chat">
<div id="header">
<div>
<div id="headerName"></div>
<div id="headerStatus"></div>
</div>
<button onclick="logout()">Logout</button>
</div>
<div id="messages"></div>
<div id="sendBox">
<input id="msg" placeholder="Type message">
<button onclick="send()">Send</button>
</div>
</div>
<script>
const firebaseConfig={apiKey:"AIzaSyB57DbuZWjQjaekNFkUrYmABql_yl-KFnA",authDomain:"unknownchat-bbd4b.firebaseapp.com",projectId:"unknownchat-bbd4b",storageBucket:"unknownchat-bbd4b.firebasestorage.app",messagingSenderId:"134440126866",appId:"1:134440126866:web:54c83a3ab12d7bdfc3194b"};
firebase.initializeApp(firebaseConfig);
const auth=firebase.auth();
const db=firebase.firestore();
const users={foreverus10:{email:"unknownmarch1@gmail.com",chat:"Bacha"},foreverus29:{email:"unknownmarch001@gmail.com",chat:"Kakka"}};
let me="",other="";
function setLoad(p){document.getElementById('loaderBar').style.width=p+'%'}
function login(){error.innerText="";setLoad(20);const u=username.value,p=password.value;if(!users[u]){error.innerText="Invalid username";setLoad(0);return;}setLoad(40);auth.signInWithEmailAndPassword(users[u].email,p).then(()=>{setLoad(70);me=u;other=Object.keys(users).find(x=>x!==u);headerName.innerText=users[other].chat;document.getElementById('login').style.display='none';document.getElementById('chat').style.display='flex';setLoad(100);load();}).catch(e=>{error.innerText=e.message;setLoad(0);});}
function logout(){auth.signOut();location.reload()}
function send(){if(!msg.value)return;db.collection('messages').add({from:me,to:other,text:msg.value,time:Date.now()});msg.value=''}
function load(){db.collection('messages').orderBy('time').onSnapshot(s=>{messages.innerHTML='';s.forEach(d=>{const m=d.data();if((m.from===me&&m.to===other)||(m.from===other&&m.to===me)){const div=document.createElement('div');div.className='msg '+(m.from===me?'right':'left');div.innerText=m.text;messages.appendChild(div);messages.scrollTop=messages.scrollHeight;}})});
}
</script>
</body>
</html>
